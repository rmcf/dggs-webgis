"use strict";(self["webpackChunkdggs_webgis"]=self["webpackChunkdggs_webgis"]||[]).push([[127],{2127:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ie});var t=a(3673),o=a(2323);const r=(0,t.Uk)(" DGGS web-GIS "),s={class:"q-pa-sm",style:{"min-width":"120px"}},i=(0,t.Uk)("DGGS web-GIS");function n(e,l,a,n,d,c){const u=(0,t.up)("q-btn"),p=(0,t.up)("q-toolbar-title"),m=(0,t.up)("q-select"),h=(0,t.up)("q-toolbar"),y=(0,t.up)("q-header"),v=(0,t.up)("q-icon"),g=(0,t.up)("q-item-section"),w=(0,t.up)("q-item"),b=(0,t.up)("LayersList"),S=(0,t.up)("q-list"),f=(0,t.up)("q-drawer"),_=(0,t.up)("router-view"),V=(0,t.up)("q-page-container"),k=(0,t.up)("q-layout"),G=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(k,{view:"hHh Lpr fFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{elevated:"",class:"bg-grey-1 text-grey-8"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:l[0]||(l[0]=e=>d.leftDrawerOpen=!d.leftDrawerOpen)}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[r])),_:1}),(0,t._)("div",s,[(0,t.Wm)(m,{"emit-value":"","map-options":"",dense:"",modelValue:d.locale,"onUpdate:modelValue":l[1]||(l[1]=e=>d.locale=e),options:d.languages},null,8,["modelValue","options"])])])),_:1})])),_:1}),(0,t.Wm)(f,{modelValue:d.leftDrawerOpen,"onUpdate:modelValue":l[4]||(l[4]=e=>d.leftDrawerOpen=e),"show-if-above":"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{class:"q-mt-lg"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(w,{to:"/",exact:"",clickable:"",active:"about"===d.link,onClick:l[2]||(l[2]=e=>d.link="about"),"active-class":"active-link"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{name:"info_outline"})])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("about")),1)])),_:1})])),_:1},8,["active"]),[[G]]),(0,t.wy)((0,t.Wm)(w,{to:"map",exact:"",clickable:"",active:"map"===d.link,onClick:l[3]||(l[3]=e=>d.link="map"),"active-class":"active-link"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{name:"public"})])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[i])),_:1})])),_:1},8,["active"]),[[G]]),(0,t.Wm)(b)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_)])),_:1})])),_:1})}a(246);var d=a(8880);const c={key:0},u={key:0,style:{height:"30px",position:"relative","margin-top":"1rem","margin-bottom":"1rem"}},p={key:0},m={class:"row q-col-gutter-sm q-mb-sm"},h={class:"col-6"},y={class:"col-6"},v={class:"q-mb-sm"},g={key:0,class:"q-mb-sm"},w={class:"q-mb-sm"},b={key:0},S={class:"q-mb-sm"},f={key:0,class:"q-mb-sm"},_={key:1,class:"q-mb-sm"},V={key:2,class:"q-mb-sm"},k={key:3,class:"q-mb-sm"},G={class:"q-mb-sm"},W={class:"q-mb-sm"},q={key:0},D={class:"row items-center q-mb-xs"},R={class:"q-ml-md"};function U(e,l,a,r,s,i){const n=(0,t.up)("q-spinner-ios"),U=(0,t.up)("q-inner-loading"),L=(0,t.up)("q-checkbox"),P=(0,t.up)("q-item-section"),E=(0,t.up)("q-item-label"),I=(0,t.up)("q-item"),A=(0,t.up)("q-select"),x=(0,t.up)("q-toggle"),Z=(0,t.up)("q-tooltip"),C=(0,t.up)("q-list"),Q=(0,t.up)("q-radio"),$=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(d.uT,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:(0,t.w5)((()=>["/map"===i.currentRouterPath?((0,t.wg)(),(0,t.iD)("div",c,[(0,t.Wm)(d.uT,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:(0,t.w5)((()=>[s.layersLoading?((0,t.wg)(),(0,t.iD)("div",u,[(0,t.Wm)(U,{showing:s.layersLoading},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{color:"primary",size:"30px"})])),_:1},8,["showing"])])):(0,t.kq)("",!0)])),_:1}),s.layersLoading?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.layersDGGS,(a=>((0,t.wg)(),(0,t.iD)("div",{key:a.id},[(0,t.Wm)(I,{tag:"label",class:"row items-start"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{modelValue:s.layersSelectedDGGS,"onUpdate:modelValue":l[0]||(l[0]=e=>s.layersSelectedDGGS=e),disable:i.disableLayers(a.crs),val:a,color:"primary"},null,8,["modelValue","disable","val"])])),_:2},1024),(0,t.Wm)(P,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"text-black"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.title),1)])),_:2},1024),(0,t.Wm)(E,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i.layerSelected(a)?((0,t.wg)(),(0,t.j4)(I,{key:0,class:"row items-start"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{avatar:""}),(0,t.Wm)(P,null,{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",h,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.opacity,"onUpdate:modelValue":e=>a.opacity=e,options:[0,.2,.3,.4,.5,.6,.7,.8,.9,1],label:e.$t("opacity")},null,8,["modelValue","onUpdate:modelValue","options","label"])]),(0,t._)("div",y,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.level,"onUpdate:modelValue":e=>a.level=e,options:a.levels,label:e.$t("level")},null,8,["modelValue","onUpdate:modelValue","options","label"])])]),(0,t._)("div",v,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.zIndex,"onUpdate:modelValue":e=>a.zIndex=e,options:[1,2,3,4,5,6,7,8,9,10],label:e.$t("z_index"),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label"])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.layerChoroplethParameters,(l=>((0,t.wg)(),(0,t.iD)("div",{key:l.layerID},[l.layerID===a.id?((0,t.wg)(),(0,t.iD)("div",g,[(0,t._)("div",w,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.choroplethParameter,"onUpdate:modelValue":e=>a.choroplethParameter=e,options:l.choroplethParameters,label:e.$t("choropleth_parameter")},null,8,["modelValue","onUpdate:modelValue","options","label"])]),""!==a.choroplethParameter?((0,t.wg)(),(0,t.iD)("div",b,[(0,t._)("div",S,[(0,t.Wm)(A,{dense:"",outlined:"","emit-value":"","map-options":"","onUpdate:modelValue":[e=>i.changeColorPalette(a.id),e=>a.choroplethScale=e],modelValue:a.choroplethScale,options:[{label:e.$t("continuous"),value:"continuous"},{label:e.$t("classified"),value:"classified"}],label:e.$t("choropleth_scale_type")},null,8,["onUpdate:modelValue","modelValue","options","label"])]),"continuous"===a.choroplethScale?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",null,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.choroplethRangesMode,"onUpdate:modelValue":e=>a.choroplethRangesMode=e,options:[{label:e.$t("equidistant"),value:"e"},{label:e.$t("quantile"),value:"q"}],label:e.$t("classification"),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options","label"])])])):(0,t.kq)("",!0),"continuous"===a.choroplethScale?((0,t.wg)(),(0,t.iD)("div",_,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.choroplethRanges,"onUpdate:modelValue":e=>a.choroplethRanges=e,options:[2,3,4,5,6,7,8,9,10],label:e.$t("classes")},null,8,["modelValue","onUpdate:modelValue","label"])])):(0,t.kq)("",!0),"continuous"===a.choroplethScale?((0,t.wg)(),(0,t.iD)("div",V,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.choroplethColorPalette,"onUpdate:modelValue":e=>a.choroplethColorPalette=e,options:["OrRd","BuGn","YlOrBr"],label:e.$t("color_palette"),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label"])])):(0,t.kq)("",!0),"classified"===a.choroplethScale?((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(A,{dense:"",outlined:"",modelValue:a.choroplethColorPalette,"onUpdate:modelValue":e=>a.choroplethColorPalette=e,options:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn"],label:"Color palette","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])])):(0,t.kq)("",!0),(0,t._)("div",G,[(0,t.Wm)(x,{modelValue:a.choroplethParameterZeroValue,"onUpdate:modelValue":e=>a.choroplethParameterZeroValue=e,"checked-icon":"check",color:"primary",label:e.$t("zero_values"),"unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue","label"])]),(0,t._)("div",W,[(0,t.Wm)(L,{modelValue:a.choroplethLabels,"onUpdate:modelValue":e=>a.choroplethLabels=e,label:e.$t("labels")},null,8,["modelValue","onUpdate:modelValue","label"])]),(0,t._)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.layerChoroplethParameters,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.layerID},[e.layerID===a.id?((0,t.wg)(),(0,t.iD)("div",q,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.choroplethLegend,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[(0,t._)("div",D,[(0,t._)("div",{style:(0,o.j5)([{width:"50px",height:"25px"},"background-color:"+e.color])},null,4),(0,t._)("div",R,(0,o.zw)(e.value),1)])])))),128))])):(0,t.kq)("",!0)])))),128))])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])))),128))])),_:2},1024)])),_:2},1024)):(0,t.kq)("",!0),i.disableLayers(a.crs)?((0,t.wg)(),(0,t.j4)(Z,{key:1},{default:(0,t.w5)((()=>[(0,t.Uk)(" The "+(0,o.zw)(a["dggs-id"])+" DGGS system is currently not supported. ",1)])),_:2},1024)):(0,t.kq)("",!0)])))),128))])),_:1})])),(0,t._)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.layersVector,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(I,{key:e.id,tag:"label"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{modelValue:s.layersSelectedVector,"onUpdate:modelValue":l[1]||(l[1]=e=>s.layersSelectedVector=e),val:e,color:"primary"},null,8,["modelValue","val"])])),_:2},1024),(0,t.Wm)(P,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"text-black"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.title),1)])),_:2},1024),(0,t.Wm)(E,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[$]]))),128))]),(0,t._)("div",null,[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.layersRaster,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(I,{key:e.id,tag:"label"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:s.layerSelectedRaster,"onUpdate:modelValue":l[2]||(l[2]=e=>s.layerSelectedRaster=e),val:e,color:"primary"},null,8,["modelValue","val"])])),_:2},1024),(0,t.Wm)(P,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.title),1)])),_:2},1024),(0,t.Wm)(E,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[$]]))),128))])),_:1})])])):(0,t.kq)("",!0)])),_:1})])}var L=a(4367),P=a(2291),E=a(7944);const I=[{h3level:2,hexArea:69e3},{h3level:3,hexArea:1e4},{h3level:4,hexArea:1350},{h3level:5,hexArea:190},{h3level:6,hexArea:27},{h3level:7,hexArea:4},{h3level:8,hexArea:.6}],A=[{id:"osm",title:"Open Street Map",description:"Collaborative project to create a free editable geographic database of the world",attributions:"",url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"esri_world_imagery",title:"ESRI World Imagery",description:"ESRI World Imagery",attributions:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"wikimedia",title:"Wikimedia maps",description:"A general colour map wikimedia maps",attributions:"",url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"cartodb",title:"CartoDB Light",description:"Good for sticking color star ratings over the top of.",attributions:"",url:"https://{a-c}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"argistopomap",title:"ArcGIS World Topo Map",description:"ArcGIS REST tile services are supported by ol/source/XYZ",attributions:"",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",type:"raster",format:"png",projection:"EPSG:4326"}],x={name:"LayersList",components:{},data(){return{collectionsAPI:"https://dggs-api-bozea3cspa-ew.a.run.app/dggs-api/collections",layersAll:A,layersDGGS:[],layerSelectedRaster:null,layersSelectedVector:[],layersSelectedDGGS:[],layersLoading:!0}},watch:{layersSelectedVector(e,l){this.addSelectedLayersVector(this.layersSelectedVector)},layerSelectedRaster(e,l){this.addSelectedLayersRaster(this.layerSelectedRaster)},layersSelectedDGGS:{handler(e,l){let a=P(this.layersSelectedDGGS);this.$store.commit("layers/SET_LAYERS_SELECTED_DGGS",a)},deep:!0},mapZoom(e,l){this.layersSelectedDGGS.length>0&&this.layersDGGS.forEach((e=>{e.levels=this.layerAvailableeReslutions(e.resolutions,this.mapArea),e.level=E(this.layerAvailableeReslutions(e.resolutions,this.mapArea))}))}},created(){let e=L(this.layersAll,(function(e){return"esri_world_imagery"===e.id}));this.layerSelectedRaster=e[0],this.getDGGSlayersList()},methods:{addSelectedLayersRaster(e){this.$store.commit("layers/SET_LAYERS_SELECTED_RASTER",e)},addSelectedLayersVector(e){this.$store.commit("layers/SET_LAYERS_SELECTED_VECTOR",e)},layerSelected(e){return!(!this.layersSelectedVector.includes(e)&&!this.layersSelectedDGGS.includes(e))},layerAvailableeReslutions(e,l){const a=[2,3,4,5,6,7,8],t=[];return a.forEach((e=>{let a=L(I,(function(l){return l.h3level===e})),o=l/a[0].hexArea;o<3e3&&t.push(e)})),t},getDGGSlayersList(){let e=this;this.$axios.get(e.collectionsAPI,{params:{},headers:{"Content-Type":"application/json"}}).then((l=>{let a=l.data.collections;a.forEach(((e,l,a)=>{e.type="vector",e.level=4,e.levels=[2,3,4,5],e.opacity=.7,e.choroplethParameter="",e.choroplethParameterZeroValue=!0,e.choroplethScale="continuous",e.choroplethRanges=5,e.choroplethRangesMode="q",e.choroplethLabels=!1,e.choroplethColorPalette="YlOrBr",e.zIndex=l+2})),e.layersDGGS=a,e.layersLoading=!1})).catch((function(l){e.layersLoading=!1}))},disableLayers(e){return"H3"!==e},changeColorPalette(e){let l=L(this.layersDGGS,{id:e}),a=l[0];"classified"===a.choroplethScale?a.choroplethColorPalette="YlOrBr":a.choroplethColorPalette="RdBu"}},computed:{currentRouterPath:function(){return this.$route.path},layersVector:function(){let e=this.layersAll,l=L(e,(function(e){return"vector"===e.type}));return l},layersRaster:function(){let e=this.layersAll,l=L(e,(function(e){return"raster"===e.type}));return l},mapZoom:function(){return this.$store.state.layers.zoom},layerChoroplethParameters:function(){return this.$store.state.layers.layerChoroplethParameters},mapArea:function(){return this.$store.state.layers.mapArea}}};var Z=a(6941),C=a(8506),Q=a(7011),$=a(3414),z=a(2035),T=a(5735),Y=a(2350),O=a(5017),j=a(8886),B=a(8870),M=a(7991),H=a(6489),K=a(7518),X=a.n(K);x.render=U;const F=x;X()(x,"components",{QInnerLoading:Z.Z,QSpinnerIos:C.Z,QList:Q.Z,QItem:$.Z,QItemSection:z.Z,QCheckbox:T.Z,QItemLabel:Y.Z,QSelect:O.Z,QToggle:j.Z,QTooltip:B.Z,QRadio:M.Z}),X()(x,"directives",{Ripple:H.Z});const N={name:"MainLayout",components:{LayersList:F},data(){return{locale:this.$i18n.locale,leftDrawerOpen:!1,color:"",link:"home",languages:[{label:"English",value:"en-US"},{label:"Eesti",value:"ee"}]}},watch:{locale(e,l){this.$i18n.locale=e},layersSelectedVector(e,l){this.addSelectedLayersVector(this.layersSelectedVector)},layerSelectedRaster(e,l){this.addSelectedLayersRaster(this.layerSelectedRaster)}},methods:{},computed:{}};var J=a(3066),ee=a(3812),le=a(9570),ae=a(4607),te=a(3747),oe=a(2428),re=a(4554),se=a(2652);N.render=n,N.__scopeId="data-v-704d3aad";const ie=N;X()(N,"components",{QLayout:J.Z,QHeader:ee.Z,QToolbar:le.Z,QBtn:ae.Z,QToolbarTitle:te.Z,QSelect:O.Z,QDrawer:oe.Z,QList:Q.Z,QItem:$.Z,QItemSection:z.Z,QIcon:re.Z,QPageContainer:se.Z}),X()(N,"directives",{Ripple:H.Z})}}]);