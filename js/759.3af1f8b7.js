"use strict";(self["webpackChunkdggs_webgis"]=self["webpackChunkdggs_webgis"]||[]).push([[759],{1759:(e,l,t)=>{t.r(l),t.d(l,{default:()=>ie});var a=t(3673);const o=e=>((0,a.dD)("data-v-df2700d4"),e=e(),(0,a.Cn)(),e),r=(0,a.Uk)(" DGGS web-GIS "),s=o((()=>(0,a._)("div",null,"SPA",-1))),i=(0,a.Uk)("About project"),d=(0,a.Uk)("DGGS web-GIS");function n(e,l,t,o,n,c){const u=(0,a.up)("q-btn"),p=(0,a.up)("q-toolbar-title"),m=(0,a.up)("q-toolbar"),h=(0,a.up)("q-header"),y=(0,a.up)("q-icon"),g=(0,a.up)("q-item-section"),v=(0,a.up)("q-item"),w=(0,a.up)("LayersList"),S=(0,a.up)("q-list"),f=(0,a.up)("q-drawer"),b=(0,a.up)("router-view"),_=(0,a.up)("q-page-container"),k=(0,a.up)("q-layout"),V=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(k,{view:"hHh Lpr fFf"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{elevated:"",class:"bg-grey-1 text-grey-8"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:l[0]||(l[0]=e=>n.leftDrawerOpen=!n.leftDrawerOpen)}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[r])),_:1}),s])),_:1})])),_:1}),(0,a.Wm)(f,{modelValue:n.leftDrawerOpen,"onUpdate:modelValue":l[3]||(l[3]=e=>n.leftDrawerOpen=e),"show-if-above":"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"q-mt-lg"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(v,{to:"/",exact:"",clickable:"",active:"about"===n.link,onClick:l[1]||(l[1]=e=>n.link="about"),"active-class":"active-link"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{name:"info_outline"})])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[i])),_:1})])),_:1},8,["active"]),[[V]]),(0,a.wy)((0,a.Wm)(v,{to:"map",exact:"",clickable:"",active:"map"===n.link,onClick:l[2]||(l[2]=e=>n.link="map"),"active-class":"active-link"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{name:"public"})])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[d])),_:1})])),_:1},8,["active"]),[[V]]),(0,a.Wm)(w)])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b)])),_:1})])),_:1})}t(246);var c=t(8880),u=t(2323);const p={key:0},m={key:0,style:{height:"30px",position:"relative","margin-top":"1rem","margin-bottom":"1rem"}},h={key:0},y={class:"row q-col-gutter-sm q-mb-sm"},g={class:"col-6"},v={class:"col-6"},w={class:"q-mb-sm"},S={key:0,class:"q-mb-sm"},f={class:"q-mb-sm"},b={key:0},_={class:"q-mb-sm"},k={key:0,class:"q-mb-sm"},V={key:1,class:"q-mb-sm"},G={key:2,class:"q-mb-sm"},W={key:3,class:"q-mb-sm"},D={class:"q-mb-sm"},q={key:0},L={class:"row items-center q-mb-xs"},R={class:"q-ml-md"};function U(e,l,t,o,r,s){const i=(0,a.up)("q-spinner-ios"),d=(0,a.up)("q-inner-loading"),n=(0,a.up)("q-checkbox"),U=(0,a.up)("q-item-section"),C=(0,a.up)("q-item-label"),P=(0,a.up)("q-item"),A=(0,a.up)("q-select"),E=(0,a.up)("q-tooltip"),I=(0,a.up)("q-list"),x=(0,a.up)("q-radio"),Z=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c.uT,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:(0,a.w5)((()=>["/map"===s.currentRouterPath?((0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(c.uT,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:(0,a.w5)((()=>[r.layersLoading?((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(d,{showing:r.layersLoading},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{color:"primary",size:"30px"})])),_:1},8,["showing"])])):(0,a.kq)("",!0)])),_:1}),r.layersLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.layersDGGS,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(P,{tag:"label",class:"row items-start"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:r.layersSelectedDGGS,"onUpdate:modelValue":l[0]||(l[0]=e=>r.layersSelectedDGGS=e),disable:s.disableLayers(e["dggs-id"]),val:e,color:"primary"},null,8,["modelValue","disable","val"])])),_:2},1024),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"text-black"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(C,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s.layerSelected(e)?((0,a.wg)(),(0,a.j4)(P,{key:0,class:"row items-start"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{avatar:""}),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a._)("div",y,[(0,a._)("div",g,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.opacity,"onUpdate:modelValue":l=>e.opacity=l,options:[0,.2,.3,.4,.5,.6,.7,.8,.9,1],label:"Opacity"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a._)("div",v,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.level,"onUpdate:modelValue":l=>e.level=l,options:e.levels,label:"Level"},null,8,["modelValue","onUpdate:modelValue","options"])])]),(0,a._)("div",w,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.zIndex,"onUpdate:modelValue":l=>e.zIndex=l,options:[1,2,3,4,5,6,7,8,9,10],label:"Z-index","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.layerChoroplethParameters,(l=>((0,a.wg)(),(0,a.iD)("div",{key:l.layerID},[l.layerID===e.id?((0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",f,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.choroplethParameter,"onUpdate:modelValue":l=>e.choroplethParameter=l,options:l.choroplethParameters,label:"Choropleth parameter"},null,8,["modelValue","onUpdate:modelValue","options"])]),""!==e.choroplethParameter?((0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("div",_,[(0,a.Wm)(A,{dense:"",outlined:"","onUpdate:modelValue":[l=>s.changeColorPalette(e.id),l=>e.choroplethScale=l],modelValue:e.choroplethScale,options:["continuous","classified"],label:"Choropleth scale type"},null,8,["onUpdate:modelValue","modelValue"])]),"continuous"===e.choroplethScale?((0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("div",null,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.choroplethRangesMode,"onUpdate:modelValue":l=>e.choroplethRangesMode=l,options:r.rangesMode,label:"Classification","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","options"])])])):(0,a.kq)("",!0),"continuous"===e.choroplethScale?((0,a.wg)(),(0,a.iD)("div",V,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.choroplethRanges,"onUpdate:modelValue":l=>e.choroplethRanges=l,options:[2,3,4,5,6,7,8,9,10],label:"Classes"},null,8,["modelValue","onUpdate:modelValue"])])):(0,a.kq)("",!0),"continuous"===e.choroplethScale?((0,a.wg)(),(0,a.iD)("div",G,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.choroplethColorPalette,"onUpdate:modelValue":l=>e.choroplethColorPalette=l,options:["OrRd","BuGn","YlOrBr"],label:"Color palette","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])])):(0,a.kq)("",!0),"classified"===e.choroplethScale?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(A,{dense:"",outlined:"",modelValue:e.choroplethColorPalette,"onUpdate:modelValue":l=>e.choroplethColorPalette=l,options:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn"],label:"Color palette","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])])):(0,a.kq)("",!0),(0,a._)("div",D,[(0,a.Wm)(n,{modelValue:e.choroplethLabels,"onUpdate:modelValue":l=>e.choroplethLabels=l,label:"Labels"},null,8,["modelValue","onUpdate:modelValue"])]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.layerChoroplethParameters,(l=>((0,a.wg)(),(0,a.iD)("div",{key:l.layerID},[l.layerID===e.id?((0,a.wg)(),(0,a.iD)("div",q,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.choroplethLegend,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l},[(0,a._)("div",L,[(0,a._)("div",{style:(0,u.j5)([{width:"50px",height:"25px"},"background-color:"+e.color])},null,4),(0,a._)("div",R,(0,u.zw)(e.value),1)])])))),128))])):(0,a.kq)("",!0)])))),128))])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])))),128))])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0),s.disableLayers(e["dggs-id"])?((0,a.wg)(),(0,a.j4)(E,{key:1},{default:(0,a.w5)((()=>[(0,a.Uk)(" The "+(0,u.zw)(e["dggs-id"])+" DGGS system is currently not supported. ",1)])),_:2},1024)):(0,a.kq)("",!0)])))),128))])),_:1})])),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.layersVector,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(P,{key:e.id,tag:"label"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:r.layersSelectedVector,"onUpdate:modelValue":l[1]||(l[1]=e=>r.layersSelectedVector=e),val:e,color:"primary"},null,8,["modelValue","val"])])),_:2},1024),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"text-black"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(C,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[Z]]))),128))]),(0,a._)("div",null,[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.layersRaster,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(P,{key:e.id,tag:"label"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{modelValue:r.layerSelectedRaster,"onUpdate:modelValue":l[2]||(l[2]=e=>r.layerSelectedRaster=e),val:e,color:"primary"},null,8,["modelValue","val"])])),_:2},1024),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.title),1)])),_:2},1024),(0,a.Wm)(C,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(e.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[Z]]))),128))])),_:1})])])):(0,a.kq)("",!0)])),_:1})])}var C=t(4367),P=t(2291),A=t(7944);const E=[{h3level:2,hexArea:69e3},{h3level:3,hexArea:1e4},{h3level:4,hexArea:1350},{h3level:5,hexArea:190},{h3level:6,hexArea:27},{h3level:7,hexArea:4},{h3level:8,hexArea:.6}],I=[{id:"countries",title:"Countries of the World",description:"List of all countries of the World from public source",attributions:"",url:"https://openlayers.org/en/latest/examples/data/geojson/countries.geojson",type:"vector",format:"geojson",projection:"EPSG:4326"},{id:"osm",title:"Open Street Map",description:"Collaborative project to create a free editable geographic database of the world",attributions:"",url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"esri_world_imagery",title:"ESRI World Imagery",description:"ESRI World Imagery",attributions:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"wikimedia",title:"Wikimedia maps",description:"A general colour map wikimedia maps",attributions:"",url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"cartodb",title:"CartoDB Light",description:"Good for sticking color star ratings over the top of.",attributions:"",url:"https://{a-c}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",type:"raster",format:"png",projection:"EPSG:4326"},{id:"argistopomap",title:"ArcGIS World Topo Map",description:"ArcGIS REST tile services are supported by ol/source/XYZ",attributions:"",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",type:"raster",format:"png",projection:"EPSG:4326"}],x={name:"LayersList",components:{},data(){return{rangesMode:[{label:"equidistant",value:"e"},{label:"quantile",value:"q"}],collectionsAPI:"https://dggs-api-bozea3cspa-ew.a.run.app/dggs-api/collections",layersAll:I,layersDGGS:[],layerSelectedRaster:null,layersSelectedVector:[],layersSelectedDGGS:[],layersLoading:!0}},watch:{layersSelectedVector(e,l){this.addSelectedLayersVector(this.layersSelectedVector)},layerSelectedRaster(e,l){this.addSelectedLayersRaster(this.layerSelectedRaster)},layersSelectedDGGS:{handler(e,l){let t=P(this.layersSelectedDGGS);this.$store.commit("layers/SET_LAYERS_SELECTED_DGGS",t)},deep:!0},mapZoom(e,l){this.layersSelectedDGGS.length>0&&this.layersDGGS.forEach((e=>{e.levels=this.layerAvailableeReslutions(e.resolutions,this.mapArea),e.level=A(this.layerAvailableeReslutions(e.resolutions,this.mapArea))}))}},created(){let e=C(this.layersAll,(function(e){return"esri_world_imagery"===e.id}));this.layerSelectedRaster=e[0],this.getDGGSlayersList()},methods:{addSelectedLayersRaster(e){this.$store.commit("layers/SET_LAYERS_SELECTED_RASTER",e)},addSelectedLayersVector(e){this.$store.commit("layers/SET_LAYERS_SELECTED_VECTOR",e)},layerSelected(e){return!(!this.layersSelectedVector.includes(e)&&!this.layersSelectedDGGS.includes(e))},layerAvailableeReslutions(e,l){const t=e.map((e=>Number(e))),a=[];return t.forEach((e=>{let t=C(E,(function(l){return l.h3level===e})),o=l/t[0].hexArea;o<3e3&&a.push(e)})),a},getDGGSlayersList(){let e=this;this.$axios.get(e.collectionsAPI,{params:{},headers:{"Content-Type":"application/json"}}).then((l=>{let t=l.data["dggs-list"];t.forEach(((e,l,t)=>{e.type="vector",e.level=4,e.levels=[2,3,4,5],e.opacity=.7,e.choroplethParameter="",e.choroplethScale="continuous",e.choroplethRanges=5,e.choroplethRangesMode="q",e.choroplethLabels=!1,e.choroplethColorPalette="YlOrBr",e.zIndex=l+2})),e.layersDGGS=t,e.layersLoading=!1})).catch((function(l){e.layersLoading=!1}))},disableLayers(e){return"H3"!==e},changeColorPalette(e){let l=C(this.layersDGGS,{id:e}),t=l[0];"classified"===t.choroplethScale?t.choroplethColorPalette="YlOrBr":t.choroplethColorPalette="RdBu"}},computed:{currentRouterPath:function(){return this.$route.path},layersVector:function(){let e=this.layersAll,l=C(e,(function(e){return"vector"===e.type}));return l},layersRaster:function(){let e=this.layersAll,l=C(e,(function(e){return"raster"===e.type}));return l},mapZoom:function(){return this.$store.state.layers.zoom},layerChoroplethParameters:function(){return this.$store.state.layers.layerChoroplethParameters},mapArea:function(){return this.$store.state.layers.mapArea}}};var Z=t(6941),Q=t(8506),T=t(7011),z=t(3414),j=t(2035),Y=t(6271),O=t(2350),M=t(5017),B=t(8870),H=t(7991),$=t(6489),K=t(7518),N=t.n(K);x.render=U;const X=x;N()(x,"components",{QInnerLoading:Z.Z,QSpinnerIos:Q.Z,QList:T.Z,QItem:z.Z,QItemSection:j.Z,QCheckbox:Y.Z,QItemLabel:O.Z,QSelect:M.Z,QTooltip:B.Z,QRadio:H.Z}),N()(x,"directives",{Ripple:$.Z});const F={name:"MainLayout",components:{LayersList:X},data(){return{leftDrawerOpen:!1,color:"",link:"home"}},watch:{layersSelectedVector(e,l){this.addSelectedLayersVector(this.layersSelectedVector)},layerSelectedRaster(e,l){this.addSelectedLayersRaster(this.layerSelectedRaster)}},methods:{},computed:{}};var J=t(3066),ee=t(3812),le=t(9570),te=t(4607),ae=t(3747),oe=t(2428),re=t(4554),se=t(2652);F.render=n,F.__scopeId="data-v-df2700d4";const ie=F;N()(F,"components",{QLayout:J.Z,QHeader:ee.Z,QToolbar:le.Z,QBtn:te.Z,QToolbarTitle:ae.Z,QDrawer:oe.Z,QList:T.Z,QItem:z.Z,QItemSection:j.Z,QIcon:re.Z,QPageContainer:se.Z}),N()(F,"directives",{Ripple:$.Z})}}]);